(this.webpackJsonpbooks_search=this.webpackJsonpbooks_search||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(24),s=a.n(n),o=(a(39),a(11)),i=(a(40),"GET/REQUEST_SEARCH"),l="GET/FETCH_BOOKS",u="GET/FETCH_BOOKS_SUCCESS",d="GET/FETCH_BOOKS_ERROR",b="PAGINATION_BOOKS/ADD_BOOKS",j="PAGINATION_BOOKS/ADD_MOREBOOKS",f="SEARCHING/ADD_SEARCCONFIG",h="SEARCHING/SEARCCONFIG_UPDATE",O="FULLBOOK/GET_FULLBOOK",p="FULLBOOK/WRITE_FULLBOOK";var m=a(17),x=(a(43),a(7)),g=(a(44),a(34)),v=a(2),_=function(e){var t=e.onSearch,a=Object(g.a)({mode:"onChange"}),r=a.reset,c=a.register,n=a.handleSubmit,s=a.formState.isValid;return Object(v.jsxs)("form",{className:"searchform",onSubmit:n((function(e){t(e),r()})),noValidate:!0,children:[Object(v.jsxs)("fieldset",{className:"searchform__fieldset",children:[Object(v.jsx)("input",Object(x.a)({className:"searchform__input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",type:"text"},c("search",{required:!0}))),Object(v.jsx)("button",{className:"searchform__btn",type:"submit",disabled:!s,children:"\u041f\u043e\u0438\u0441\u043a"})]}),Object(v.jsxs)("fieldset",{className:"searchform__fieldset searchform__fieldset_select-resize",children:[Object(v.jsxs)("label",{className:"searchform__label-select",htmlFor:"sorting",children:["Sorting by:"," "]}),Object(v.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"sorting"},c("sorting")),{},{children:[Object(v.jsx)("option",{value:"relevance",children:"relevance"}),Object(v.jsx)("option",{value:"newest",children:"newest"})]})),Object(v.jsxs)("label",{className:"searchform__label-select",htmlFor:"category",children:["Category:"," "]}),Object(v.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"category"},c("category")),{},{children:[Object(v.jsx)("option",{value:"",children:"all"}),Object(v.jsx)("option",{value:"art",children:"art"}),Object(v.jsx)("option",{value:"biography",children:"biography"}),Object(v.jsx)("option",{value:"computers",children:"computers"}),Object(v.jsx)("option",{value:"history",children:"history"}),Object(v.jsx)("option",{value:"medical",children:"medical"}),Object(v.jsx)("option",{value:"poetry",children:"poetry"})]}))]})]})},y=function(e){var t=e.onSearch;return Object(v.jsx)("header",{className:"header",children:Object(v.jsx)(_,{onSearch:t})})},k=(a(47),a(48),a(9)),N="https://images.unsplash.com/photo-1599508704512-2f19efd1e35f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",S="https://www.googleapis.com/books/v1/volumes?q",C="AIzaSyAiAERcpGEYcW42YWIGNBdar-rU8L6v5nI",I=function(e){var t=e.item,a=Object(k.g)(),r=Object(m.b)(),n=t.volumeInfo,s=n.categories,i=n.title,l=n.authors,u=(t.volumeInfo.imageLinks||N).thumbnail,d=c.a.useState(""),b=Object(o.a)(d,2),j=b[0],f=b[1],h=c.a.useState(""),p=Object(o.a)(h,2),x=p[0],g=p[1];return c.a.useEffect((function(){if(s){var e=s.join(", ");f(e)}if(l){var t=l.join(", ");g(t)}}),[s,l]),Object(v.jsxs)("li",{className:"bookscard",onClick:function(){var e;r((e=t.selfLink,{type:O,selfLink:e})),a.push("/book")},children:[Object(v.jsx)("img",{className:"bookscard__img",src:u||N,alt:i}),Object(v.jsxs)("div",{className:"bookscard__footer",children:[j&&Object(v.jsxs)("p",{className:"bookscard__text",children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",j]}),Object(v.jsxs)("p",{className:"bookscard__text",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",i]}),x&&Object(v.jsxs)("p",{className:"bookscard__text",children:["\u0410\u0432\u0442\u043e\u0440: ",x]})]})]})},w=(a(53),function(){return Object(v.jsx)("div",{className:"preloader",children:Object(v.jsx)("div",{className:"preloader__container",children:Object(v.jsx)("span",{className:"preloader__round"})})})}),L=function(e){var t=e.books,a=e.onClickMore,r=e.isLoading,c=e.isLoadMore,n=e.error;return Object(v.jsxs)("section",{className:"books",children:[n?Object(v.jsx)("p",{className:"books__error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043b\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a \u043f\u043e\u0437\u0436\u0435."}):"",r?Object(v.jsx)(w,{}):Object(v.jsx)("ul",{className:"books-items",children:t&&t.map((function(e){return Object(v.jsx)(I,{item:e},e.id)}))}),c&&t.length&&Object(v.jsx)("button",{type:"button",className:"books__btn",onClick:function(){a()},disabled:!c,children:"more"})]})},E=(a(54),a(55),function(e){var t=e.item.volumeInfo,a=t.title,r=t.authors,n=t.categories,s=t.imageLinks,i=t.description,l=c.a.useState(""),u=Object(o.a)(l,2),d=u[0],b=u[1],j=c.a.useState(""),f=Object(o.a)(j,2),h=f[0],O=f[1];c.a.useEffect((function(){if(n){var e=n.join(" / ");b(e)}if(r){var t=r.join(", ");O(t)}}),[n,r]);var p=s.small,m=s.large;return Object(v.jsxs)("li",{className:"fullbook",children:[Object(v.jsx)("div",{className:"fullbook__container-img",children:Object(v.jsx)("img",{className:"fullbook__img",src:p||m,alt:a})}),Object(v.jsxs)("div",{className:"fullbook__container",children:[d&&Object(v.jsx)("p",{className:"fullbook__category",children:d}),Object(v.jsx)("h3",{className:"fullbook__title",children:a}),h&&Object(v.jsx)("p",{className:"fullbook__author",children:h}),Object(v.jsx)("p",{className:"fullbook__description",children:i})]})]})}),B=function(e){var t=e.fullbook;return Object(v.jsx)("section",{className:"bookpage",children:Object(v.jsx)("ul",{className:"bookpage__list",children:t&&t.map((function(e){return Object(v.jsx)(E,{item:e},e.id)}))})})};var F=function(){var e=Object(m.b)(),t=Object(k.g)(),a=c.a.useState([]),r=Object(o.a)(a,2),n=r[0],s=r[1],l=Object(m.c)((function(e){return e.search})),u=l.searchWord,d=l.sorting,j=l.category,O=Object(m.c)((function(e){return e.search.startIndex})),p=Object(m.c)((function(e){return e.cards.fetchedCards.items})),x=Object(m.c)((function(e){return e.cards})),g=x.isLoading,_=x.isLoadMore,N=x.error,S=Object(m.c)((function(e){return e.fullbook})),C=S.fullbook,I=S.showFullBook;return c.a.useEffect((function(){if(p){var e=p.filter((function(e){return e.volumeInfo.categories&&j?"object"===typeof e:null})).filter((function(e){return e.volumeInfo.categories.includes((t=j)?t[0].toUpperCase()+t.slice(1):t);var t}));s(""!==j?e:p)}}),[p,j]),Object(v.jsx)("div",{className:"page",children:Object(v.jsxs)("div",{className:"page__container",children:[Object(v.jsx)(y,{onSearch:function(a){var r={searchWord:a.search,startIndex:0,sorting:a.sorting,category:a.category};e(function(e){return{type:i,searchConfig:e}}(r)),e(function(e){return{type:f,payload:e}}(r)),s([]),t.push("/")}}),Object(v.jsxs)(k.d,{children:[Object(v.jsx)(k.b,{exact:!0,path:"/",children:Object(v.jsx)(L,{books:n,onClickMore:function(){if(p.length){var t={search:u,startIndex:O+10,sorting:d,category:j};e(function(e){return{type:b,searchConfig:e}}(t)),e(function(e){return{type:h,payload:e}}(t))}},isLoading:g,isLoadMore:_,error:N})}),Object(v.jsx)(k.b,{exact:!0,path:"/book",children:Object(v.jsx)(B,{fullbook:C})})]}),Object(v.jsx)(k.b,{path:"/",children:I?Object(v.jsx)(k.a,{to:"/book"}):Object(v.jsx)(k.a,{to:"/"})})]})})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))},A=a(18),T=a(33),G=a(8),R={fetchedCards:[],isLoadMore:!0,isLoading:!1,error:!1},D={searchWord:"",startIndex:0,sorting:"",category:""},K={fullbook:[],showFullBook:!1},W=Object(A.b)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!0,error:!1});case u:t.payload.items.length<10&&(e.isLoadMore=!1);var a=Object(G.a)(new Map(t.payload.items.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:a,kind:t.payload.kind,totalItems:t.payload.totalItems},isLoading:!1,error:!1});case d:return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!1,error:!0});case j:t.payload.items.length<10&&(e.isLoadMore=!1);var r=e.fetchedCards.items.concat(t.payload.items),c=Object(G.a)(new Map(r.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:c,kind:t.payload.kind,totalItems:t.payload.totalItems}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.searchWord,startIndex:t.payload.startIndex,sorting:t.payload.sorting,category:t.payload.category});case h:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.search,startIndex:e.startIndex+=10,sorting:t.payload.sorting,category:t.payload.category});default:return e}},fullbook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;if(t.type===p){var a=[];return a.push(t.payload),Object(x.a)(Object(x.a)({},e),{},{fullbook:a,showFullBook:!0})}return e}}),U=a(4),H=a.n(U),P=a(16),V=a(12);function q(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(V.a)(H.a.mark((function e(t){var a,r,c,n,s,o,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchConfig,r=a.searchWord,c=void 0===r?t.searchConfig.search:r,n=a.startIndex,s=a.sorting,o=a.category,e.next=3,fetch("".concat(S,"=").concat(c,"&subject:").concat(o,"&orderBy=").concat(s,"&startIndex=").concat(n,"&key=").concat(C));case 3:return i=e.sent,e.next=6,i.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return J.apply(this,arguments)}function J(){return(J=Object(V.a)(H.a.mark((function e(t){var a,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.selfLink,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=H.a.mark(ee),Q=H.a.mark(te),Z=H.a.mark(ae),$=H.a.mark(re);function ee(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)(i,te);case 2:return e.next=4,Object(P.c)(b,ae);case 4:return e.next=6,Object(P.c)(O,re);case 6:case"end":return e.stop()}}),X)}function te(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(P.b)({type:l});case 2:return a.next=4,Object(P.a)(q,e);case 4:if((t=a.sent).error){a.next=10;break}return a.next=8,Object(P.b)({type:u,payload:t});case 8:a.next=12;break;case 10:return a.next=12,Object(P.b)({type:d,payload:t});case 12:case"end":return a.stop()}}),Q)}function ae(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(P.a)(q,e);case 3:return t=a.sent,a.next=6,Object(P.b)({type:j,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),Z,null,[[0,8]])}function re(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(P.a)(z,e);case 3:return t=a.sent,a.next=6,Object(P.b)({type:p,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),$,null,[[0,8]])}var ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.c,ne=Object(T.a)(),se=Object(A.d)(W,Object(A.c)(Object(A.a)(ne),ce()));ne.run(ee);var oe=a(26);s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(oe.a,{children:Object(v.jsx)(m.a,{store:se,children:Object(v.jsx)(F,{})})})}),document.getElementById("root")),M()}},[[56,1,2]]]);
//# sourceMappingURL=main.81a5ee88.chunk.js.map