(this.webpackJsonpbooks_search=this.webpackJsonpbooks_search||[]).push([[0],{51:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(27),s=a.n(n),o=(a(51),a(11)),i=(a(52),"GET/REQUEST_SEARCH"),l="GET/FETCH_BOOKS",u="GET/FETCH_BOOKS_SUCCESS",d="GET/FETCH_BOOKS_ERROR",b="PAGINATION_BOOKS/ADD_BOOKS",j="PAGINATION_BOOKS/ADD_MOREBOOKS",f="SEARCHING/ADD_SEARCCONFIG",h="SEARCHING/SEARCCONFIG_UPDATE",O="FULLBOOK/GET_FULLBOOK",p="FULLBOOK/WRITE_FULLBOOK";var m=a(18),x=(a(55),a(7)),g=(a(56),a(46)),v=a(43),_=a.n(v),y=a(2),k=function(e){var t=e.onSearch,a=Object(g.a)({mode:"onChange"}),c=a.reset,n=a.register,s=a.handleSubmit,i=a.formState.isValid,l=Object(r.useState)(null),u=Object(o.a)(l,2),d=u[0],b=u[1];return Object(y.jsxs)("form",{className:"searchform",onSubmit:s((function(e){_.a.get("https://www.googleapis.com/books/v1/volumes?q=intitle:".concat(e.search)).then((function(e){b(e.data.totalItems)})),t(e),c()})),noValidate:!0,children:[Object(y.jsxs)("fieldset",{className:"searchform__fieldset",children:[Object(y.jsx)("input",Object(x.a)({className:"searchform__input",placeholder:"Enter Book name",type:"text"},n("search",{required:!0}))),Object(y.jsx)("button",{className:"searchform__btn",type:"submit",disabled:!i,children:"Search"})]}),Object(y.jsxs)("fieldset",{className:"searchform__fieldset searchform__fieldset_select-resize",children:[Object(y.jsxs)("label",{className:"searchform__label-select",htmlFor:"sorting",children:["Sorting by:"," "]}),Object(y.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"sorting"},n("sorting")),{},{children:[Object(y.jsx)("option",{value:"relevance",children:"relevance"}),Object(y.jsx)("option",{value:"newest",children:"newest"})]})),Object(y.jsxs)("label",{className:"searchform__label-select",htmlFor:"category",children:["Category:"," "]}),Object(y.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"category"},n("category")),{},{children:[Object(y.jsx)("option",{value:"",children:"all"}),Object(y.jsx)("option",{value:"art",children:"art"}),Object(y.jsx)("option",{value:"biography",children:"biography"}),Object(y.jsx)("option",{value:"computers",children:"computers"}),Object(y.jsx)("option",{value:"history",children:"history"}),Object(y.jsx)("option",{value:"medical",children:"medical"}),Object(y.jsx)("option",{value:"poetry",children:"poetry"})]}))]}),d&&Object(y.jsxs)("div",{style:{textAlign:"center",color:"white",fontSize:"20px"},children:["Total found Books:",d]})]})},N=function(e){var t=e.onSearch;return Object(y.jsx)("header",{className:"header",children:Object(y.jsx)(k,{onSearch:t})})},S=(a(77),a(78),a(9)),w="https://images.unsplash.com/photo-1599508704512-2f19efd1e35f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",I="https://www.googleapis.com/books/v1/volumes?q",C="AIzaSyAiAERcpGEYcW42YWIGNBdar-rU8L6v5nI",E=function(e){var t=e.item,a=Object(S.g)(),r=Object(m.b)(),n=t.volumeInfo,s=n.categories,i=n.title,l=n.authors,u=(t.volumeInfo.imageLinks||w).thumbnail,d=c.a.useState(""),b=Object(o.a)(d,2),j=b[0],f=b[1],h=c.a.useState(""),p=Object(o.a)(h,2),x=p[0],g=p[1];return c.a.useEffect((function(){if(s){var e=s.join(", ");f(e)}if(l){var t=l.join(", ");g(t)}}),[s,l]),Object(y.jsxs)("li",{className:"bookscard",onClick:function(){var e;r((e=t.selfLink,{type:O,selfLink:e})),a.push("/book")},children:[Object(y.jsx)("img",{className:"bookscard__img",src:u||w,alt:i}),Object(y.jsxs)("div",{className:"bookscard__footer",children:[j&&Object(y.jsxs)("p",{className:"bookscard__text",children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",j]}),Object(y.jsxs)("p",{className:"bookscard__text",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",i]}),x&&Object(y.jsxs)("p",{className:"bookscard__text",children:["\u0410\u0432\u0442\u043e\u0440: ",x]})]})]})},L=(a(83),function(){return Object(y.jsx)("div",{className:"preloader",children:Object(y.jsx)("div",{className:"preloader__container",children:Object(y.jsx)("span",{className:"preloader__round"})})})}),B=function(e){var t=e.books,a=e.onClickMore,r=e.isLoading,c=e.isLoadMore,n=e.error;return Object(y.jsxs)("section",{className:"books",children:[n?Object(y.jsx)("p",{className:"books__error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043b\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a \u043f\u043e\u0437\u0436\u0435."}):"",r?Object(y.jsx)(L,{}):Object(y.jsx)("ul",{className:"books-items",children:t&&t.map((function(e){return Object(y.jsx)(E,{item:e},e.id)}))}),c&&t.length&&Object(y.jsx)("button",{type:"button",className:"books__btn",onClick:function(){a()},disabled:!c,children:"more"})]})},A=(a(84),a(85),function(e){var t=e.item.volumeInfo,a=t.title,r=t.authors,n=t.categories,s=t.imageLinks,i=t.description,l=c.a.useState(""),u=Object(o.a)(l,2),d=u[0],b=u[1],j=c.a.useState(""),f=Object(o.a)(j,2),h=f[0],O=f[1];c.a.useEffect((function(){if(n){var e=n.join(" / ");b(e)}if(r){var t=r.join(", ");O(t)}}),[n,r]);var p=s.small,m=s.large;return Object(y.jsxs)("li",{className:"fullbook",children:[Object(y.jsx)("div",{className:"fullbook__container-img",children:Object(y.jsx)("img",{className:"fullbook__img",src:p||m,alt:a})}),Object(y.jsxs)("div",{className:"fullbook__container",children:[d&&Object(y.jsx)("p",{className:"fullbook__category",children:d}),Object(y.jsx)("h3",{className:"fullbook__title",children:a}),h&&Object(y.jsx)("p",{className:"fullbook__author",children:h}),Object(y.jsx)("p",{className:"fullbook__description",children:i})]})]})}),F=function(e){var t=e.fullbook;return Object(y.jsx)("section",{className:"bookpage",children:Object(y.jsx)("ul",{className:"bookpage__list",children:t&&t.map((function(e){return Object(y.jsx)(A,{item:e},e.id)}))})})};var M=function(){var e=Object(m.b)(),t=Object(S.g)(),a=c.a.useState([]),r=Object(o.a)(a,2),n=r[0],s=r[1],l=Object(m.c)((function(e){return e.search})),u=l.searchWord,d=l.sorting,j=l.category,O=Object(m.c)((function(e){return e.search.startIndex})),p=Object(m.c)((function(e){return e.cards.fetchedCards.items})),x=Object(m.c)((function(e){return e.cards})),g=x.isLoading,v=x.isLoadMore,_=x.error,k=Object(m.c)((function(e){return e.fullbook})),w=k.fullbook,I=k.showFullBook;return c.a.useEffect((function(){if(p){var e=p.filter((function(e){return e.volumeInfo.categories&&j?"object"===typeof e:null})).filter((function(e){return e.volumeInfo.categories.includes((t=j)?t[0].toUpperCase()+t.slice(1):t);var t}));s(""!==j?e:p)}}),[p,j]),Object(y.jsx)("div",{className:"page",children:Object(y.jsxs)("div",{className:"page__container",children:[Object(y.jsx)(N,{onSearch:function(a){var r={searchWord:a.search,startIndex:0,sorting:a.sorting,category:a.category};e(function(e){return{type:i,searchConfig:e}}(r)),e(function(e){return{type:f,payload:e}}(r)),s([]),t.push("/")}}),Object(y.jsxs)(S.d,{children:[Object(y.jsx)(S.b,{exact:!0,path:"/",children:Object(y.jsx)(B,{books:n,onClickMore:function(){if(p.length){var t={search:u,startIndex:O+30,sorting:d,category:j};e(function(e){return{type:b,searchConfig:e}}(t)),e(function(e){return{type:h,payload:e}}(t))}},isLoading:g,isLoadMore:v,error:_})}),Object(y.jsx)(S.b,{exact:!0,path:"/book",children:Object(y.jsx)(F,{fullbook:w})})]}),Object(y.jsx)(S.b,{path:"/",children:I?Object(y.jsx)(S.a,{to:"/book"}):Object(y.jsx)(S.a,{to:"/"})})]})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))},G=a(19),R=a(45),D=a(8),K={fetchedCards:[],isLoadMore:!0,isLoading:!1,error:!1},W={searchWord:"",startIndex:0,sorting:"",category:""},U={fullbook:[],showFullBook:!1},H=Object(G.b)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!0,error:!1});case u:t.payload.items.length<10&&(e.isLoadMore=!1);var a=Object(D.a)(new Map(t.payload.items.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:a,kind:t.payload.kind,totalItems:t.payload.totalItems},isLoading:!1,error:!1});case d:return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!1,error:!0});case j:t.payload.items.length<10&&(e.isLoadMore=!1);var r=e.fetchedCards.items.concat(t.payload.items),c=Object(D.a)(new Map(r.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:c,kind:t.payload.kind,totalItems:t.payload.totalItems}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.searchWord,startIndex:t.payload.startIndex,sorting:t.payload.sorting,category:t.payload.category});case h:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.search,startIndex:e.startIndex+=30,sorting:t.payload.sorting,category:t.payload.category});default:return e}},fullbook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;if(t.type===p){var a=[];return a.push(t.payload),Object(x.a)(Object(x.a)({},e),{},{fullbook:a,showFullBook:!0})}return e}}),P=a(4),q=a.n(P),V=a(17),z=a(13);function Y(e){return J.apply(this,arguments)}function J(){return(J=Object(z.a)(q.a.mark((function e(t){var a,r,c,n,s,o,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchConfig,r=a.searchWord,c=void 0===r?t.searchConfig.search:r,n=a.startIndex,s=a.sorting,o=a.category,e.next=3,fetch("".concat(I,"=").concat(c,"&subject:").concat(o,"&orderBy=").concat(s,"&startIndex=").concat(n,"&maxResults=",30,"&key=").concat(C));case 3:return i=e.sent,e.next=6,i.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(z.a)(q.a.mark((function e(t){var a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.selfLink,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=q.a.mark(ae),$=q.a.mark(re),ee=q.a.mark(ce),te=q.a.mark(ne);function ae(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.c)(i,re);case 2:return e.next=4,Object(V.c)(b,ce);case 4:return e.next=6,Object(V.c)(O,ne);case 6:case"end":return e.stop()}}),Z)}function re(e){var t;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(V.b)({type:l});case 2:return a.next=4,Object(V.a)(Y,e);case 4:if((t=a.sent).error){a.next=10;break}return a.next=8,Object(V.b)({type:u,payload:t});case 8:a.next=12;break;case 10:return a.next=12,Object(V.b)({type:d,payload:t});case 12:case"end":return a.stop()}}),$)}function ce(e){var t;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(V.a)(Y,e);case 3:return t=a.sent,a.next=6,Object(V.b)({type:j,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),ee,null,[[0,8]])}function ne(e){var t;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(V.a)(X,e);case 3:return t=a.sent,a.next=6,Object(V.b)({type:p,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),te,null,[[0,8]])}var se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.c,oe=Object(R.a)(),ie=Object(G.d)(H,Object(G.c)(Object(G.a)(oe),se()));oe.run(ae);var le=a(29);s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(le.a,{children:Object(y.jsx)(m.a,{store:ie,children:Object(y.jsx)(M,{})})})}),document.getElementById("root")),T()}},[[86,1,2]]]);
//# sourceMappingURL=main.b980c4de.chunk.js.map